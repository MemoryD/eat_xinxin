<!DOCTYPE html>
{% load staticfiles %}
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- PAGE settings -->
  <!-- <link rel="icon" href="https://templates.pingendo.com/assets/Pingendo_favicon.ico"> -->
  <link rel="icon" href="{% static 'eatwhat/images/phone_cat_32px.ico' %}">
  <title>What to eat today</title>
  <meta name="description" content="Free Bootstrap 4 Pingendo Elegant template for restaurant and food">
  <meta name="keywords" content="Pingendo restaurant food elegant free template bootstrap 4">
  
  <!-- CSS dependencies -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="{% static 'eatwhat/css/elegant.css' %}" type="text/css">
  
  <!-- Script: Make my navbar transparent when the document is scrolled to top -->
  <script src="{% static 'eatwhat/js/navbar-ontop.js' %}"></script>
  <!-- Script: Animated entrance -->
  <script src="{% static 'eatwhat/js/animate-in.js' %}"></script>
  <!-- 自定义消息弹出框-->
  <script src="{% static 'eatwhat/js/mdialog.js' %}"></script>
  <script src="{% static 'eatwhat/js/zepto.min.js' %}"></script>
  <link rel="stylesheet" href="{% static 'eatwhat/css/mdialog.css' %}" type="text/css">
</head>

<body class="">
  <!-- 导航栏开始 -->
  <nav class="navbar-expand-md navbar-dark bg-dark navbar fixed-top">
    <div class="container">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar3SupportedContent" aria-controls="navbar3SupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse text-center justify-content-center" id="navbar3SupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item mx-3">
            <a class="nav-link text-light" href="#">
              <b>Eat</b>
            </a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link" href="#book">
              <b>RECOMMENDATION</b>
            </a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link" href="#menu">
              <b>RECENT POST</b>
            </a>
          </li>
          <li class="nav-item mx-2">
            <a class="nav-link" href="#venue">
              <b>ADD INFORMATION</b>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- 导航栏结束 -->

  <!-- 首页开始 -->
  <div class="align-items-center d-flex photo-overlay py-5 cover" style="background-image: url(&quot;{% static 'eatwhat/images/cover_dark.jpg' %}&quot;);">
    <div class="container">
      <div class="row">
        <div class="col-lg-7 align-self-center text-lg-left text-center">
          <h1 class="mb-0 mt-4 display-3">Eat</h1>
          <p class="mb-5 lead">Help you make decesion. XD</p>
        </div>
        <div class="col-lg-5 p-3" id="s"> </div>
      </div>
    </div>
  </div>
  <!-- 首页结束 -->

  <!-- 选择食物开始 -->
  <div class="py-5 photo-overlay" id="book" style="background-image: url(&quot;{% static 'eatwhat/images/makereservation_dark.jpg' %}&quot;);">
    <div class="container">
      <div class="row my-6 py-5">
        <div class="col-md-5">
          <form class="bg-dark-opaque p-4" method="post" target="nm_iframe">
            <h4 class="mb-4 text-center">Make decesion</h4>
            <div class="container px-0">
              <div class="form-group">
                <label for="sel1">School:</label>
                <select class="form-control" id="select_school">
                  {% for scho in school %}
                    <option value="{{scho.pk}}">{{ scho }}</option>
                  {% empty %}
                    <option>暂无学校</option>
                  {% endfor %}
                </select>
                <br> </div>
            </div>
            <div class="container px-0">
              <div class="form-group">
                <label for="sel1">Category:</label>
                <select class="form-control" id="select_category">
                  	<option value="-1">随机</option>
                  {% for cate in category %}
                    <option value="{{cate.pk}}">{{ cate }}</option>
                  {% empty %}
                    <option>暂无分类</option>
                  {% endfor %}
                </select>
                <br> </div>
            </div>
            <label class="w-25 col-form-label">Price</label>
            <div class="form-group form-row">
              <!-- <label class="col-form-label">From</label> -->
              <input type="number" class="form-control w-25 mx-1" placeholder="From" id="price_form" value="0">
              <!-- <label class="col-form-label">To</label> -->
              <input type="number" class="form-control w-25  mx-3" placeholder="to" id="price_to" value="20"> </div>
            <button type="submit" class="btn mt-4 btn-block p-2 btn-outline-primary w-50" id="select_food">
              <b>Click me</b>
            </button>
          </form>
          <div class="col-lg-6"> </div>
        </div>
        <div class="col-md-6 offset-md-1">
          <form class="bg-dark-opaque p-4">
            <table class="table my-2">
              <thead>
                <tr>
                  <th colspan="2" id="food_title">Today's Recomendation</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td >Name</td>
                  <td id = "food_name">{{ today_food.name }}</td>
                </tr>
                <tr>
                  <td>Category</td>
                  <td id="food_category">{{ today_food.category }}</td>
                </tr>
                <tr>
                  <td>Price</td>
                  <td id="food_price">{{ today_food.price }}</td>
                </tr>
                <tr>
                  <td>Location</td>
                  <td id="food_location">{{ today_food.location }}</td>
                </tr>
                <tr>
                  <td>Comment</td>
                  <td id="food_comment">{{ today_food.comment }}</td>
                </tr>
              </tbody>
            </table>
          </form>
          <iframe id="id_iframe" name="nm_iframe" style="display:none;"></iframe>
        </div>
      </div>
      <!-- JavaScript dependencies -->
      <script src="https://code.jquery.com/jquery-3.2.1.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      <!-- Script: Smooth scrolling between anchors in the same page -->
      <script src="{% static 'eatwhat/js/smooth-scroll.js' %}"></script>
      <script type="text/javascript">
        $("#select_food").click(function() {
              $.ajax({
                  url: "select_food",
                  type: "POST",
                  data: { "school": $("#select_school").val(), 
                          "category": $("#select_category").val(),
                          "from": $("#price_form").val(),
                          "to": $("#price_to").val(),
                          },
                  success: function (food) {
                      $("#food_title").text("Your Result Here");
                      $("#food_name").text(food["name"]);
                      $("#food_price").text(food["price"]);
                      $("#food_category").text(food["category"]);
                      $("#food_location").text(food["location"]);
                      $("#food_comment").text(food["comment"]);
                  }
              })
        })
      </script>
    </div>
  </div>
 <!-- 选择食物结束-->
  <!-- 猜你喜欢开始-->
  <div class="py-5 text-center" id="menu" style="background-image: url('{% static 'eatwhat/images/venue_4_dark.jpg' %}');">
    <div class="container">
      <div class="row p-4 my-5 bg-primary animate-in-down">
        <div class="col-md-12">
          <h2 class="mt-3">Recent Post</h2>
          <p class="mb-5">I guess you will like this .Enjoy it .</p>
          <div class="row">
          {% for foo in food %}
            <div class="col-md-4">
              <div class="card-block p-3">
                <h3>{{ foo.name }}</h3>
                <h3>
                  <sup>$</sup>{{ foo.price }}</h3>
                <hr>
                <!-- <p>{{ foo.category }}&nbsp;</p> -->
                <p>{{ foo.location }}&nbsp;</p>
                <p>{{ foo.comment }}&nbsp;</p>
                <a class="btn btn-dark" onclick="pick_it()">PICK IT</a>
              </div>
            </div>
          {% empty %}
            <div class="col-md-4">
              <div class="card-block p-3">
                <h3>Name</h3>
                <h4>
                  <sup>$</sup> 75 </h4>
                <hr>
                <p>Use all the features and get the maximum out of the app</p>
                <p>Use all the features and get the maximum out of the app</p>
                <a href="#" class="btn btn-dark">PICK IT</a>
              </div>
            </div>
          {% endfor %}
          <script type="text/javascript">
            function pick_it(){
              new TipBox({type:'success',str:'好的，你选了这个',hasBtn:true});
            }
          </script>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 图片展示开始 -->
  <div class="">
    <div class="container-fluid">
      <div class="row">
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_12_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_11_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_10_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_9_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_8_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_7_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_5_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_6_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_4_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_3_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img src="{% static 'eatwhat/images/food_2_dark.jpg' %}" class="img-fluid"> </div>
        <div class="p-0 col-md-2 col-4">
          <img class="img-fluid" src="{% static 'eatwhat/images/food_1_dark.jpg' %}"> </div>
      </div>
    </div>
  </div>
  <!-- 图片展示结束 -->

  <!-- 添加食物开始 -->
  <div class="py-3" id="venue">
    <div class="container">
      <div class="row my-5 bg-primary animate-in-down">
        <div class="col-md-6">
          <form class="bg-dark-opaque p-4">
            <h4 class="mb-4 text-center">Add Your Food</h4>
            <div class="container px-0">
              <div class="form-group my-2">
                <label class=" col-form-label">Name</label>
                <input type="text" class="form-control " id="add_name"> </div>
              <div class="form-group">
                <label for="sel1">School:</label>
                <select class="form-control" id="add_school">
                  {% for scho in school %}
                    <option value="{{scho.pk}}">{{ scho }}</option>
                  {% empty %}
                    <option>暂无学校</option>
                  {% endfor %}
                </select>
                <br> </div>
            </div>
            <div class="container px-0">
              <div class="form-group">
                <label for="sel1">Category:</label>
                <select class="form-control" id="add_category" >
                  {% for cate in category %}
                    <option value="{{cate.pk}}">{{ cate }}</option>
                  {% empty %}
                    <option>暂无分类</option>
                  {% endfor %}
                </select>
                <br> </div>
            </div>
            <div class="form-group">
              <label class="w-25 col-form-label">Price</label>
              <input type="number" class="form-control" step="0.1" id="add_price"> </div>
          </form>
        </div>
        <div class="p-0 col-md-6">
          <form class="bg-dark-opaque p-4" method="post" target="nm_iframe">
          	<h4 class="mb-4 text-center" style="text-indent:-9999px;">add</h4>
            <div class="form-group">
              <label class="w-25 col-form-label">Location</label>
              <input type="text" class="form-control " id="add_location"> </div>
            <div class="container px-0">
              <div class="form-group my-3">
                <label>Comment:</label>
                <textarea required="" class="form-control form-control-sm" placeholder="Description" rows="6" cols="30" id="add_comment" name="description"></textarea>
              </div>
            </div>
            <button type="" class="btn mt-4 btn-block p-2 btn-outline-primary" id="add_food">Submit</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
      $("#add_food").click(function() {
          
              if($("#add_name").val() == "")
                new TipBox({type:'tip',str:'名称不能为空!',hasBtn:true});
              else if($("#add_price").val() <= 0) 
                  new TipBox({type:'tip',str:'价格必须是正数!',hasBtn:true}); 
              else if($("#add_location").val() == "")
                new TipBox({type:'tip',str:'位置不能为空!',hasBtn:true}); 
              else if($("#add_comment").val() == "")
                new TipBox({type:'tip',str:'评论不能为空!',hasBtn:true});
              else
              $.ajax({
                  url: "add_food",
                  type: "POST",
                  data: { "name": $("#add_name").val(), 
                      "school": $("#add_school").val(), 
                      "category": $("#add_category").val(),
                      "price": $("#add_price").val(),
                      "location": $("#add_location").val(),
                      "comment": $("#add_comment").val()
                      },
                  success: function (msg) {
                    if (msg == "OK")
                    {
                      new TipBox({type:'load',str:"添加数据中..",setTime:1500,callBack:function(){  
                      new TipBox({type:'success',str:'添加成功',hasBtn:true});  
                      }});
                      // $("#add_name").val("");
                    }
                    else 
                    {
                      new TipBox({type:'load',str:"添加数据中..",setTime:1500,callBack:function(){  
                      new TipBox({type:'error',str:'服务器开小差了，请稍候再试！',hasBtn:true});  
                      }});
                    } 
                  }
              })
      })
    </script>
    <!-- 添加食物结束 -->
    
  <!-- 网页注脚开始 -->

  <div class="row">
    <div class="col-md-12 mt-3">
      <p class="text-center text-muted">© Copyright 2018 Xinxin$Memory - All rights reserved. </p>
    </div>
  </div>
  <!-- 网页注脚结束 -->
</body>
</html>